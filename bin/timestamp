#!/usr/bin/env ruby
# frozen_string_literal: true

require 'timestamp_maker'
require 'optparse'

options = {
  format: '%Y-%m-%d %H:%M:%S'
}

option_parser = OptionParser.new do |parser|
  parser.banner = "Usage: #{__FILE__} [options] INPUT_FILE_PATH OUTPUT_FILE_PATH"

  parser.on('-f FORMAT', '--format FORMAT', 'strftime() format string, defaults to "%Y-%m-%d %H:%M:%S"') do |value|
    options[:format] = value
  end
end
option_parser.parse!

if ARGV.length != 2
  puts option_parser
  exit 1
end

input = ARGV.shift
output = ARGV.shift

TimestampMaker.add_timestamp(
  input,
  output,
  format: options[:format]
)
